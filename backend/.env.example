###############################################
# MyCats Pro Backend - 環境変数テンプレート
# 
# 本ファイルをコピーして .env を作成してください:
#   cp .env.example .env
#
# ⚠️ セキュリティ警告:
#   - 実際の値は絶対にGitにコミットしないこと
#   - 本番環境では強力なランダム値を使用すること
#   - シークレット生成: node scripts/generate-secrets.mjs
###############################################

# ==========================================
# 必須設定
# ==========================================

# 環境 (development | production | test)
NODE_ENV=development

# サーバーポート
PORT=3004

# データベース接続URL
# 形式: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL=postgresql://mycats:mycats_dev_password@localhost:5433/mycats_development?schema=public

# ==========================================
# JWT 認証 (本番環境では強力な値に変更必須!)
# ==========================================

# アクセストークン用シークレット (最低32文字、ランダム生成推奨)
# 生成方法: node scripts/generate-secrets.mjs
JWT_SECRET=changeme-local-jwt-secret-REPLACE-IN-PRODUCTION

# リフレッシュトークン用シークレット (JWT_SECRETとは異なる値必須)
JWT_REFRESH_SECRET=changeme-local-refresh-secret-REPLACE-IN-PRODUCTION

# トークン有効期限
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ==========================================
# CORS設定
# ==========================================

# 許可するオリジン (本番環境では必須、カンマ区切りで複数指定可)
# 開発環境ではコメントアウト可（自動的にlocalhostが許可される）
# CORS_ORIGIN=https://your-domain.com,https://www.your-domain.com

# ==========================================
# セキュリティ設定
# ==========================================

# パスワード最小文字数
PASSWORD_MIN_LENGTH=8

# CSRF トークン用のシークレットと有効期限（秒）
# 本番環境では強力なランダム値を使用すること (最低32文字)
# 生成方法: node scripts/generate-secrets.mjs
CSRF_TOKEN_SECRET=changeme-csrf-secret-REPLACE-IN-PRODUCTION-min-32-chars
CSRF_TOKEN_TTL_SECONDS=600

# Argon2 ハッシュ設定 (デフォルト値で問題なし)
ARGON2_MEMORY_COST=65536
ARGON2_TIME_COST=3
ARGON2_PARALLELISM=4

# APIレート制限
THROTTLE_TTL=60000
THROTTLE_LIMIT=100

# ==========================================
# オプション設定
# ==========================================

# ログレベル (fatal | error | warn | info | debug | trace)
LOG_LEVEL=debug

# ヘルスチェック設定
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_MEMORY_THRESHOLD=0.9

# 管理者アカウント (開発/シード用のみ)
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=Passw0rd!
ADMIN_FORCE_UPDATE=0

# ==========================================
# 開発専用設定 (本番環境では使用禁止!)
# ==========================================

# 認証バイパス (開発専用、本番では必ず0)
# ⚠️ WARNING: 本番環境では絶対に1にしないこと!
AUTH_DISABLED=0

# ==========================================
# モニタリング (オプション)
# ==========================================

# Sentry DSN (エラー追跡)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_TRACES_SAMPLE_RATE=0.1
# SENTRY_PROFILES_SAMPLE_RATE=0.1

# ==========================================
# 本番環境デプロイチェックリスト
# ==========================================
# 
# □ JWT_SECRET を強力なランダム値に変更
# □ JWT_REFRESH_SECRET を強力なランダム値に変更（JWT_SECRETとは異なる値）
# □ CSRF_TOKEN_SECRET を強力なランダム値に変更
# □ DATABASE_URL を本番データベースに変更
# □ CORS_ORIGIN を実際のドメインに設定
# □ AUTH_DISABLED=0 であることを確認
# □ NODE_ENV=production に設定
# □ ログレベルを info または warn に変更
# □ 環境変数を安全な場所で管理 (AWS Secrets Manager等)
#
###############################################