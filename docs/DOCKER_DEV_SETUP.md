# Docker é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€Docker Compose ã‚’ä½¿ç”¨ã—ãŸå®Œå…¨ã‚³ãƒ³ãƒ†ãƒŠåŒ–é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“‹ ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [ãƒ¡ãƒªãƒƒãƒˆ](#ãƒ¡ãƒªãƒƒãƒˆ)
- [å‰ææ¡ä»¶](#å‰ææ¡ä»¶)
- [ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ](#ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ)
- [docker-compose.dev.yml ã®æ§‹æˆ](#docker-composedevyml-ã®æ§‹æˆ)
- [ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆæˆ¦ç•¥](#ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆæˆ¦ç•¥)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

## æ¦‚è¦

`docker-compose.dev.yml` ã¯é–‹ç™ºç’°å¢ƒå°‚ç”¨ã® Docker Compose è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚æœ¬ç•ªç’°å¢ƒã® `docker-compose.yml` ã¨ã¯åˆ†é›¢ã—ã¦ç®¡ç†ã•ã‚Œã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¾ã™ï¼š

- **PostgreSQL**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒ“ã‚¹
- **Backend**: NestJS API ã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œï¼‰
- **Frontend**: Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ï¼ˆFast Refreshå¯¾å¿œï¼‰

## ãƒ¡ãƒªãƒƒãƒˆ

### 1. ç’°å¢ƒæ§‹ç¯‰ã®ç°¡ç•¥åŒ–
- Node.jsã€PostgreSQLã€pnpm ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦
- ç’°å¢ƒå¤‰æ•°ã®è¨­å®šãƒŸã‚¹ã‚’é˜²æ­¢
- ãƒãƒ¼ãƒ é–“ã§çµ±ä¸€ã•ã‚ŒãŸé–‹ç™ºç’°å¢ƒ

### 2. ä¾å­˜é–¢ä¿‚ã®åˆ†é›¢
- ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã®ç’°å¢ƒã«å½±éŸ¿ã•ã‚Œãªã„
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–“ã®ä¾å­˜é–¢ä¿‚ã®ç«¶åˆã‚’å›é¿
- ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã§ã®å†æ§‹ç¯‰ãŒå®¹æ˜“

### 3. é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Š
- ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ã§å…¨ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
- ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œï¼ˆã‚³ãƒ¼ãƒ‰å¤‰æ›´ã‚’å³åº§ã«åæ˜ ï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ãƒ»ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•æŠ•å…¥

### 4. æœ¬ç•ªç’°å¢ƒã¨ã®ä¸€è²«æ€§
- åŒã˜ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆnode:20-alpine3.22ï¼‰ã‚’ä½¿ç”¨
- Docker ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµŒç”±ã®ã‚µãƒ¼ãƒ“ã‚¹é–“é€šä¿¡
- æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®ã‚³ãƒ³ãƒ†ãƒŠå‹•ä½œç¢ºèª

## å‰ææ¡ä»¶

ä»¥ä¸‹ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

- **Docker Desktop**: æœ€æ–°ç‰ˆï¼ˆDocker Compose å«ã‚€ï¼‰
  - [macOS](https://docs.docker.com/desktop/install/mac-install/)
  - [Windows](https://docs.docker.com/desktop/install/windows-install/)
  - [Linux](https://docs.docker.com/desktop/install/linux-install/)

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### åˆå›èµ·å‹•ï¼ˆãƒ“ãƒ«ãƒ‰å«ã‚€ï¼‰

```bash
# Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦å…¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•
pnpm run docker:dev:build
```

åˆå›ã¯ä»¥ä¸‹ã®å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ï¼š
1. ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
3. Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç”Ÿæˆ
4. PostgreSQL ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•
5. Backend ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•
6. Frontend ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•

> **æ³¨æ„**: é–‹ç™ºç”¨ã® `docker-compose.dev.yml` ã§ã¯ã€Backend ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚ã« Prisma ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯è‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚åˆå›èµ·å‹•å¾Œã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‚’æœ€æ–°çŠ¶æ…‹ã«ã™ã‚‹å ´åˆã¯ã€åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
>
> ```bash
> docker exec -it mycats_dev_backend pnpm --filter backend run prisma:migrate
> ```
>
> ã¾ãŸã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‹ã‚‰å®Ÿè¡Œã™ã‚‹å ´åˆï¼š
> ```bash
> pnpm --filter backend run prisma:migrate
> ```

**èµ·å‹•æ™‚é–“**: åˆå›ã¯ 5ã€œ10 åˆ†ç¨‹åº¦ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€Ÿåº¦ã«ä¾å­˜ï¼‰

### 2å›ç›®ä»¥é™ã®èµ·å‹•

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’åˆ©ç”¨ã—ã¦èµ·å‹•ï¼ˆé«˜é€Ÿï¼‰
pnpm run docker:dev
```

**èµ·å‹•æ™‚é–“**: 30ç§’ã€œ1åˆ†ç¨‹åº¦

### ã‚µãƒ¼ãƒ“ã‚¹ã®ç¢ºèª

èµ·å‹•å¾Œã€ä»¥ä¸‹ã® URL ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: http://localhost:3000
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ API**: http://localhost:3004
- **ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯**: http://localhost:3004/health
- **Swagger UI**: http://localhost:3004/api

### åœæ­¢ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
# ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢ï¼ˆãƒ‡ãƒ¼ã‚¿ã¯ä¿æŒï¼‰
pnpm run docker:dev:down

# ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚‚å‰Šé™¤
pnpm run docker:dev:clean
```

## docker-compose.dev.yml ã®æ§‹æˆ

### ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆ

```yaml
services:
  postgres:     # PostgreSQL 15
  backend:      # NestJS API (development ã‚¹ãƒ†ãƒ¼ã‚¸)
  frontend:     # Next.js (development ã‚¹ãƒ†ãƒ¼ã‚¸)
```

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯

- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å**: `mycats_dev_network`
- **ã‚µãƒ¼ãƒ“ã‚¹é–“é€šä¿¡**: ã‚³ãƒ³ãƒ†ãƒŠåã§åå‰è§£æ±ºï¼ˆä¾‹: `http://backend:3004`ï¼‰
- **ãƒ›ã‚¹ãƒˆã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹**: `localhost` ã§ãƒãƒ¼ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°

### ãƒãƒ¼ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°

| ã‚µãƒ¼ãƒ“ã‚¹ | ã‚³ãƒ³ãƒ†ãƒŠå†…ãƒãƒ¼ãƒˆ | ãƒ›ã‚¹ãƒˆãƒãƒ¼ãƒˆ | ç”¨é€” |
|---------|----------------|------------|------|
| postgres | 5432 | 5433 | PostgreSQL |
| backend | 3004 | 3004 | NestJS API |
| frontend | 3000 | 3000 | Next.js |

### ç’°å¢ƒå¤‰æ•°

#### Backend
```yaml
DATABASE_URL: postgresql://mycats:mycats_dev_password@postgres:5432/mycats_development
NODE_ENV: development
PORT: 3004
CORS_ORIGIN: http://localhost:3000
```

#### Frontend
```yaml
NEXT_PUBLIC_API_URL: http://localhost:3004
NODE_ENV: development
```

## ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆæˆ¦ç•¥

### Backend

```yaml
volumes:
  - ./backend:/app/backend:cached              # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼ˆmacOSæœ€é©åŒ–ï¼‰
  - ./node_modules:/app/node_modules:delegated # ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ root
  - /app/backend/node_modules                  # ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ç®¡ç†
  - ./package.json:/app/package.json:cached    # ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®š
  - ./pnpm-lock.yaml:/app/pnpm-lock.yaml:cached
  - ./pnpm-workspace.yaml:/app/pnpm-workspace.yaml:cached
```

**ãƒã‚¤ãƒ³ãƒˆ**:
- `:cached` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ›ã‚¹ãƒˆâ†’ã‚³ãƒ³ãƒ†ãƒŠã®æ›¸ãè¾¼ã¿ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šï¼ˆmacOSï¼‰
- `node_modules` ã¯ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ç‹¬ç«‹ç®¡ç†ï¼ˆãƒ›ã‚¹ãƒˆã¨ã®æ··åœ¨ã‚’é˜²æ­¢ï¼‰
- ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆpackage.json, pnpm-lock.yamlï¼‰ã‚‚ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã“ã¨ã§ã€é–‹ç™ºä¸­ã®æŸ”è»Ÿæ€§ã‚’ç¢ºä¿
- **é‡è¦**: ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã—ãŸå ´åˆã¯ `pnpm run docker:dev:build` ã§å†ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦

### Frontend

```yaml
volumes:
  - ./frontend:/app/frontend:cached            # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼ˆmacOSæœ€é©åŒ–ï¼‰
  - ./node_modules:/app/node_modules:delegated # ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ root
  - /app/frontend/node_modules                 # ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ç®¡ç†
  - /app/frontend/.next                        # Next.js ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ°¸ç¶šåŒ–
  - ./package.json:/app/package.json:cached    # ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®š
  - ./pnpm-lock.yaml:/app/pnpm-lock.yaml:cached
  - ./pnpm-workspace.yaml:/app/pnpm-workspace.yaml:cached
```

**ãƒã‚¤ãƒ³ãƒˆ**:
- `.next` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ç®¡ç†ï¼ˆãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ€é©åŒ–ï¼‰
- Fast Refresh ãŒæ­£å¸¸ã«å‹•ä½œ
- ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´æ™‚ã¯å†ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦

### pnpm ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¨ node_modules ã®æ‰±ã„

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ pnpm workspace ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€root ã® `node_modules` ã«ã¯ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ãŒå«ã¾ã‚Œã¾ã™ã€‚ä»¥ä¸‹ã®æˆ¦ç•¥ã§å¯¾å¿œã—ã¦ã„ã¾ã™ï¼š

1. **root node_modules ã®ãƒã‚¦ãƒ³ãƒˆ**: ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è§£æ±ºã®ãŸã‚ã«å¿…è¦
2. **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å€‹åˆ¥ã® node_modules ã‚’åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ åŒ–**: `/app/backend/node_modules`, `/app/frontend/node_modules` ã‚’ç‹¬ç«‹ç®¡ç†
3. **çµæœ**: ãƒ›ã‚¹ãƒˆã¨ã‚³ãƒ³ãƒ†ãƒŠã§ç•°ãªã‚‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã‚‚å‹•ä½œã—ã€ä¾å­˜é–¢ä¿‚ã®ç«¶åˆã‚’å›é¿

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒãƒ¼ãƒˆç«¶åˆã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**:
```
Error starting userland proxy: listen tcp4 0.0.0.0:3004: bind: address already in use
```

**åŸå› **: ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã§æ—¢ã«åŒã˜ãƒãƒ¼ãƒˆãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•**:
```bash
# 1. ãƒ­ãƒ¼ã‚«ãƒ«ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢
pnpm run dev:stop

# 2. ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª
lsof -i :3004
lsof -i :3000

# 3. ãƒ—ãƒ­ã‚»ã‚¹ã‚’å¼·åˆ¶çµ‚äº†ï¼ˆPID ã¯ lsof ã®å‡ºåŠ›ã‹ã‚‰å–å¾—ï¼‰
kill -9 <PID>

# 4. Docker Compose ã‚’å†èµ·å‹•
pnpm run docker:dev
```

### ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ãŒå‹•ä½œã—ãªã„

**ç—‡çŠ¶**: ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å¤‰æ›´ãŒã‚³ãƒ³ãƒ†ãƒŠã«åæ˜ ã•ã‚Œãªã„

**åŸå› 1**: ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆã®è¨­å®šãƒŸã‚¹

**è§£æ±ºæ–¹æ³•**:
```bash
# ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Œå…¨ã«å‰Šé™¤ã—ã¦å†æ§‹ç¯‰
pnpm run docker:dev:clean
pnpm run docker:dev:build
```

**åŸå› 2**: macOS/Windows ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ã®é…å»¶

**è§£æ±ºæ–¹æ³•**:
```bash
# polling ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–ï¼ˆdocker-compose.dev.yml ã«è¿½è¨˜ï¼‰
environment:
  - CHOKIDAR_USEPOLLING=true
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**:
```
Error: P1001: Can't reach database server at `postgres:5432`
```

**åŸå› **: PostgreSQL ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ã¦ã„ãªã„ã€ã¾ãŸã¯ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãŒå¤±æ•—

**è§£æ±ºæ–¹æ³•**:
```bash
# 1. PostgreSQL ã®ãƒ­ã‚°ã‚’ç¢ºèª
docker logs mycats_dev_postgres

# 2. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã®çŠ¶æ…‹ã‚’ç¢ºèª
docker ps

# 3. PostgreSQL ã‚’å†èµ·å‹•
docker restart mycats_dev_postgres

# 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ç›´æ¥æ¥ç¶šã—ã¦ãƒ†ã‚¹ãƒˆ
docker exec -it mycats_dev_postgres psql -U mycats -d mycats_development
```

### ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å•é¡Œ

**ç—‡çŠ¶**: ä¾å­˜é–¢ä¿‚ã®å¤‰æ›´ãŒåæ˜ ã•ã‚Œãªã„

**è§£æ±ºæ–¹æ³•**:
```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—ã§å†ãƒ“ãƒ«ãƒ‰
docker compose -f docker-compose.dev.yml build --no-cache

# ã¾ãŸã¯
pnpm run docker:dev:clean
pnpm run docker:dev:build
```

### Prisma ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ãŒåæ˜ ã•ã‚Œãªã„

**ç—‡çŠ¶**: `backend/prisma/schema.prisma` ã‚’å¤‰æ›´ã—ãŸãŒã€Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒå¤ã„ã¾ã¾

**åŸå› **: Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰æ™‚ã«ç”Ÿæˆã•ã‚Œã‚‹ãŸã‚ã€ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•å¾Œã®ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã¯è‡ªå‹•åæ˜ ã•ã‚Œãªã„

**è§£æ±ºæ–¹æ³•**:

**æ–¹æ³•1**: ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å†ç”Ÿæˆï¼ˆæ¨å¥¨ï¼‰
```bash
docker exec -it mycats_dev_backend pnpm --filter backend run prisma:generate
```

**æ–¹æ³•2**: ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å†ãƒ“ãƒ«ãƒ‰ï¼ˆã‚¹ã‚­ãƒ¼ãƒ + ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¤‰æ›´æ™‚ï¼‰
```bash
pnpm run docker:dev:build
```

**æ–¹æ³•3**: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨ã‚‚å¿…è¦ãªå ´åˆ
```bash
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
docker exec -it mycats_dev_backend pnpm --filter backend run prisma:migrate

# Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå†ç”Ÿæˆ
docker exec -it mycats_dev_backend pnpm --filter backend run prisma:generate
```

### ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**:
```
FATAL ERROR: Reached heap limit Allocation failed - JavaScript heap out of memory
```

**åŸå› **: Docker Desktop ã®ãƒ¡ãƒ¢ãƒªåˆ¶é™ãŒä¸è¶³

**è§£æ±ºæ–¹æ³•**:

1. **Docker Desktop ã®è¨­å®šã‚’é–‹ã**
2. **Resources â†’ Advanced**
3. **Memory ã‚’ 4GB ä»¥ä¸Šã«è¨­å®š**ï¼ˆæ¨å¥¨: 8GBï¼‰
4. **Apply & Restart**

### ãƒ­ã‚°ã®ç¢ºèªæ–¹æ³•

```bash
# ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’è¡¨ç¤º
docker compose -f docker-compose.dev.yml logs

# ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°ã®ã¿è¡¨ç¤º
docker compose -f docker-compose.dev.yml logs backend
docker compose -f docker-compose.dev.yml logs frontend

# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ­ã‚°ã‚’è¿½è·¡
docker compose -f docker-compose.dev.yml logs -f backend
```

## é«˜åº¦ãªä½¿ã„æ–¹

### å€‹åˆ¥ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•

```bash
# PostgreSQL ã®ã¿èµ·å‹•
docker compose -f docker-compose.dev.yml up postgres

# Backend ã®ã¿èµ·å‹•ï¼ˆPostgreSQL ã¯è‡ªå‹•èµ·å‹•ï¼‰
docker compose -f docker-compose.dev.yml up backend

# Frontend ã®ã¿èµ·å‹•ï¼ˆBackend ã¨ PostgreSQL ã¯è‡ªå‹•èµ·å‹•ï¼‰
docker compose -f docker-compose.dev.yml up frontend
```

### ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ

```bash
# Backend ã‚³ãƒ³ãƒ†ãƒŠã§ Prisma ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
docker exec -it mycats_dev_backend pnpm --filter backend run prisma:migrate

# Frontend ã‚³ãƒ³ãƒ†ãƒŠã§ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
docker exec -it mycats_dev_frontend pnpm --filter frontend run build

# Backend ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾è©±çš„ã«ãƒ­ã‚°ã‚¤ãƒ³
docker exec -it mycats_dev_backend sh
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒªã‚»ãƒƒãƒˆ

```bash
# 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’å‰Šé™¤
pnpm run docker:dev:clean

# 2. å†èµ·å‹•ï¼ˆåˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹ï¼‰
pnpm run docker:dev:build
```

## ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã¨ã‚³ãƒ³ãƒ†ãƒŠé–‹ç™ºã®ä½¿ã„åˆ†ã‘

| é …ç›® | ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º | ã‚³ãƒ³ãƒ†ãƒŠé–‹ç™º |
|-----|------------|------------|
| èµ·å‹•é€Ÿåº¦ | é€Ÿã„ | åˆå›ã¯é…ã„ï¼ˆ2å›ç›®ä»¥é™ã¯é«˜é€Ÿï¼‰ |
| ç’°å¢ƒæ§‹ç¯‰ | å¿…è¦ | ä¸è¦ |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | å°‘ãªã„ | å¤šã„ï¼ˆDocker Desktop ãŒå¿…è¦ï¼‰ |
| åˆ†é›¢æ€§ | ä½ã„ | é«˜ã„ |
| æœ¬ç•ªç’°å¢ƒã¨ã®ä¸€è²«æ€§ | ä½ã„ | é«˜ã„ |
| ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° | å®¹æ˜“ | ã‚„ã‚„è¤‡é›‘ |

**æ¨å¥¨**:
- **æ—¥å¸¸é–‹ç™º**: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºï¼ˆ`pnpm run dev`ï¼‰
- **ç’°å¢ƒå•é¡Œã®åˆ‡ã‚Šåˆ†ã‘**: ã‚³ãƒ³ãƒ†ãƒŠé–‹ç™ºï¼ˆ`pnpm run docker:dev`ï¼‰
- **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®æ¤œè¨¼**: ã‚³ãƒ³ãƒ†ãƒŠé–‹ç™º
- **æ–°ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: ã‚³ãƒ³ãƒ†ãƒŠé–‹ç™º

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [README.md](../README.md) - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®æ¦‚è¦
- [docker-compose.yml](../docker-compose.yml) - æœ¬ç•ªç’°å¢ƒã®è¨­å®š
- [Dockerfile.backend](../Dockerfile.backend) - Backend Dockerfile
- [Dockerfile.frontend](../Dockerfile.frontend) - Frontend Dockerfile
- [TROUBLESHOOTING.md](../TROUBLESHOOTING.md) - ä¸€èˆ¬çš„ãªãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

## ã¾ã¨ã‚

Docker Compose é–‹ç™ºç’°å¢ƒã¯ä»¥ä¸‹ã®å ´åˆã«ç‰¹ã«æœ‰ç”¨ã§ã™ï¼š

âœ… **ãƒãƒ¼ãƒ é–‹ç™º**: ç’°å¢ƒã®çµ±ä¸€ãŒé‡è¦ãªå ´åˆ  
âœ… **æ–°ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚é–“ã‚’çŸ­ç¸®ã—ãŸã„å ´åˆ  
âœ… **æœ¬ç•ªç’°å¢ƒã®æ¤œè¨¼**: ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã§ã®å‹•ä½œç¢ºèªãŒå¿…è¦ãªå ´åˆ  
âœ… **ã‚¯ãƒªãƒ¼ãƒ³ãªç’°å¢ƒ**: ä¾å­˜é–¢ä¿‚ã®å•é¡Œã‚’åˆ‡ã‚Šåˆ†ã‘ãŸã„å ´åˆ

é€šå¸¸ã®é–‹ç™ºã§ã¯ `pnpm run dev` ã‚’ä½¿ç”¨ã—ã€å¿…è¦ã«å¿œã˜ã¦ Docker ç’°å¢ƒã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚
