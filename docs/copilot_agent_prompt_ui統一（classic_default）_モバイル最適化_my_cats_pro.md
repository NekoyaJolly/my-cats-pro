# Copilot Agent 実行プロンプト（最終版）

対象リポジトリ: https://github.com/NekoyaJolly/my-cats-pro

あなたは本リポジトリのフロントエンド改善担当です。**デザイン（テーマ）を「Classic Default」へ一本化**し、テーマ切替由来の UI 崩れを根治してください。特に **Modal / Button の統一**と、**モバイル表示の最適化**を最優先で実施します。

---

## 0. 背景（現状の問題）
- デザイン（テーマ）が 4 つ選択可能だが、切替後に一部が旧テーマ/別テーマのスタイルを参照している疑いがあり、UI が破綻している。
- 代表的な症状:
  - Modal の枠線やカード感が無く、内容が背景と混ざる
  - Modal の内容が透過して可読性が悪い
  - Button が他要素のサイズ体系を参照しておらず、極端にサイズが違う
- 機能は動くがデザイン性・一貫性が低く、UX が悪い。

---

## 1. 目的（ゴール）
1) **メインデザインを Classic Default へ一本化**し、テーマ切替に起因する崩れをゼロにする
2) **Modal デザインを統一**（背景・枠線/影・角丸・余白・Overlay を統一）
3) **Button デザインを統一**（サイズ階層/余白/高さ/角丸）
   - 追加要件: 「作成」「追加」などの **背景塗りつぶし（filled）ボタンを廃止**し、**枠線（outline）＋テキストカラー**で表現する
4) **モバイル表示の最適化を最優先**（表示崩れ・可読性・タップ領域・Modal の扱い）

---

## 2. スコープ
### 対象
- フロントエンド（UI/UX）
- Theme / Provider / Modal / Button / レイアウト（特にモバイル）

### 非対象（原則）
- API 契約・DB・データ構造変更
- 仕様変更（機能追加・導線追加）は UI 改善に必要な最小限のみ
- 大規模なフォルダ再編（必要最小限）

---

## 3. 完了条件（Acceptance Criteria）
- テーマ選択 UI が撤去または無効化され、**Classic Default 以外が適用されない**
- 主要画面で Modal を開いた際に以下を満たす:
  - Modal 本体が **不透明な背景**を持つ
  - **枠線 or 影**、**角丸**、**余白**が統一
  - Overlay の暗さ/不透明度が統一され、背景と内容が混ざらない
- 主要画面の Button が以下を満たす:
  - サイズ（高さ/余白/フォント）が一貫
  - 「作成」「追加」などの主要アクションが **outline 表現**になっている
- モバイル（小さい画面）で以下を満たす:
  - 主要画面のレイアウト崩れが無い（横スクロール発生、文字潰れ、タップ不能などが無い）
  - Modal はモバイルで扱いやすい（必要に応じて fullScreen）
  - ボタンのタップ領域が適切で、主要導線が押しやすい

---

## 4. 実装原則（必須）
- **Single Source of Truth を Mantine の theme / components（Theme Override）に置く**
- 例外的な className / inline style による場当たり修正は禁止（必要時は理由と範囲を明記）
- Modal / Button は「共通定義（theme.components もしくは共通ラッパ）」に集約し、ページごとのバラつきを排除
- Tailwind はレイアウト補助に寄せ、コンポーネント見た目（色/角丸/影/余白など）は Mantine 基準で統一

---

## 5. タスク（実行手順）

### Phase A: 現状把握（必須）
1. テーマ関連実装の棚卸し
   - MantineProvider / theme 定義ファイル
   - テーマ選択 UI（UI 部品/状態管理/永続化: localStorage 等）
   - 4 テーマの定義場所、適用方式（CSS variables / class toggle / theme override など）
2. Modal / Button の使用箇所の横断調査
   - Mantine の Modal / modals manager の使用
   - 独自 wrapper（例: AppModal, BaseModal 等）があるか
   - Button の variant / size がページごとにバラついていないか
3. モバイル崩れのホットスポット抽出
   - 代表ページ（一覧/詳細/作成/設定など）
   - 代表コンポーネント（モーダル、フォーム、ヘッダ、固定ボタンなど）

### Phase B: デザインを Classic Default へ一本化（必須）
1. テーマ選択 UI を撤去/無効化
   - UI から選択を消す
   - 永続化（localStorage 等）があれば停止
2. 4 テーマの差分実装を整理
   - Classic Default を base とし、それ以外のテーマを削除または完全に無効化
   - 残す場合も「適用される経路」を封鎖し、技術的負債を減らす
3. CSS 側でテーマ依存のクラス/変数が散っている場合は統合

### Phase C: Modal デザインの統一（必須）
1. すべての Modal に共通のデフォルト設定を適用
   - Overlay（暗さ/不透明度）
   - Modal 本体の background（透過禁止）
   - 枠線 or 影（どちらかを標準に）
   - radius / padding / header-body の余白
2. モバイル最適化
   - 小画面では fullScreen 化、または width/height をモバイル向けに最適化
   - スクロール領域（body）とヘッダ固定の扱いを確認
3. 個別画面で例外が必要なら props で明示し、デフォルトは統一

### Phase D: Button デザインの統一（必須）
1. サイズ体系の確定
   - sm / md / lg（または compact）など、アプリとして使うセットを固定
   - 高さ・padding・font-size・radius を統一
2. 主要アクションの表現を outline へ変更
   - 「作成」「追加」などの CTA は **outline + text color** を標準に
   - filled は原則禁止（例外: 破壊的操作など、必要なら限定）
3. 既存のバラつきを解消
   - ページごとに独自指定している variant/size を排除
   - 可能なら AppButton を用意するか、theme.components の Button で一括統一

### Phase E: モバイル表示の最適化（最優先）
1. 主要画面をモバイル幅で検証し、レイアウトを調整
   - 固定幅・過剰な左右 padding・横スクロールの発生を排除
   - グリッド/カラムの積み替え（Stack 化）
2. タップ領域と可読性
   - ボタン最小高さ/余白
   - フォントサイズと行間
   - モーダル内のフォーム要素の間隔
3. モバイルでの Modal 体験
   - fullScreen / close ボタン / スクロールの自然さ
   - キーボード出現時に要素が隠れないか

---

## 6. 推奨アウトプット（Deliverables）
- PR（またはコミット列）
- 変更点サマリ（どの問題をどう直したか）
- 影響範囲（触った画面/コンポーネント一覧）
- 再発防止ガイド（README または docs に追記）
  - 新規 Modal/Button を作る時のルール
  - 禁止事項（ページ個別の inline/style 乱用など）

---

## 7. 検証チェックリスト（最低限）
- Desktop:
  - 主要ページで Modal を開く → 背景透過なし、枠線/影、余白、可読性 OK
  - 主要導線ボタン → サイズ一貫、CTA は outline 表現
- Mobile:
  - 主要ページで横スクロールが発生しない
  - ボタンが押しやすい（サイズ/余白）
  - Modal が操作しやすい（必要に応じて fullScreen）

---

## 8. 注意（制約）
- 機能を壊さないこと（見た目改善が主）
- 大規模リファクタは禁止（必要なら理由と範囲を限定）
- 最終的に Classic Default 一択で安定する状態を作る

---

## 9. まず最初に出すべき報告（必須）
作業開始後、以下を短く報告してから実装に入ってください。
- テーマ切替の実装箇所（ファイルパス一覧）
- Modal/Button の共通化方針（theme.components or wrapper どちらで行くか）
- モバイル崩れの主要原因トップ3（推定で可、根拠を添える）

